!function(){"use strict";function t(t,e,n){var r,h,u,o,s;if(this.data=t,this.query=e,this.filter=n,s=this._lookup(e[e.length-1],!0),this.currentNode=s.node,this.currentIndex=0,this.queue=[],this._enqueueChildren(s.unmatched),this.end=!1,this.matchSet=null,e.length>1)for(this.matchSet={},r=0;r<e.length-1;++r){if(u=this._lookup(e[r]),!u)return this.matchSet=null,void(this.end=!0);for(u=u.node,h=0;h<u[i].length;++h)o=u[i][h],this.matchSet[o]=this.matchSet[o]||0,this.matchSet[o]+=1}}function e(t){return this.items[t]}function n(e,n){return e=e.toLowerCase().split(" "),e=e.filter(function(t){return!!t.length}),new t(this,e,n)}function r(t){t.get=e,t.search=n}var i=" items";t.prototype._enqueueChildren=function(t){var e=[];for(var n in this.currentNode)this.currentNode.hasOwnProperty(n)&&e.push(n);t&&(e=e.filter(function(e){return 0===e.indexOf(t)})),e.sort();for(var r=0;r<e.length;++r)" "!==e[r][0]&&this.queue.push(this.currentNode[e[r]])},t.prototype._lookup=function(t,e){for(var n=this.data.index,r=t;r.length;){var i=!1;for(var h in n)if(" "!==h[0]&&n.hasOwnProperty(h)&&0===r.indexOf(h)){r=r.substr(h.length),n=n[h],i=!0;break}if(!i)return e?{node:n,unmatched:r}:null}return{node:n,unmatched:r}},t.prototype.next=function(){var t,e;if(this.end)return null;for(;this.currentIndex<this.currentNode[i].length;)if(t=this.currentNode[i][this.currentIndex],this.currentIndex+=1,(null===this.matchSet||this.matchSet[t]>=this.query.length-1)&&(e=this.data.items[t],!this.filter||this.filter(e)))return e;return this.currentIndex>=this.currentNode[i].length?0===this.queue.length?(this.end=!0,null):(this.currentNode=this.queue.shift(),this._enqueueChildren(),this.currentIndex=0,this.next()):void 0},t.prototype.remaining=function(){for(var t,e=[];t=this.next();)e.push(t);return e},RadDog&&(RadDog.prototype.get=e,RadDog.prototype.search=n);var h=RadDog||{prepare:r};"function"==typeof define&&define.amd?define(h):"object"==typeof exports?module.exports=h:window.RadDog=h}();